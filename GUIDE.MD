# Complete API Gateway Project with Express-Gateway

### Project Structure

```txt
express-gateway-project/
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ server.js
‚îú‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ gateway.config.yml
‚îÇ   ‚îú‚îÄ‚îÄ system.config.yml
‚îÇ   ‚îî‚îÄ‚îÄ models/
‚îÇ       ‚îî‚îÄ‚îÄ users.json
‚îú‚îÄ‚îÄ extensions/
‚îÇ   ‚îî‚îÄ‚îÄ custom-policy/
‚îÇ       ‚îú‚îÄ‚îÄ index.js
‚îÇ       ‚îî‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îî‚îÄ‚îÄ init-gateway.js
‚îú‚îÄ‚îÄ docker/
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îî‚îÄ‚îÄ docker-compose.yml
‚îî‚îÄ‚îÄ docs/
    ‚îî‚îÄ‚îÄ api-reference.md
```


## File Contents

### 1. package.json

```json
{
  "name": "express-gateway-api",
  "version": "1.0.0",
  "description": "API Gateway built with Express Gateway",
  "main": "server.js",
  "scripts": {
    "start": "node server.js",
    "dev": "eg gateway start",
    "test": "jest",
    "create-user": "node scripts/create-credentials.js",
    "docker:build": "docker build -t api-gateway -f docker/Dockerfile .",
    "docker:up": "docker-compose -f docker/docker-compose.yml up -d",
    "docker:down": "docker-compose -f docker/docker-compose.yml down"
  },
  "dependencies": {
    "express-gateway": "^1.16.11",
    "dotenv": "^16.3.1",
    "redis": "^4.6.7",
    "jsonwebtoken": "^9.0.2",
    "axios": "^1.5.0",
    "helmet": "^7.0.0",
    "cors": "^2.8.5",
    "compression": "^1.7.4"
  },
  "devDependencies": {
    "jest": "^29.6.2",
    "supertest": "^6.3.3",
    "nodemon": "^3.0.1"
  },
  "keywords": [
    "api-gateway",
    "express-gateway",
    "microservices"
  ],
  "author": "Your Name",
  "license": "MIT"
}
```

### 2. server.js (Main Entry Point)

```js
require('dotenv').config();
const gateway = require('express-gateway');

// Validate required environment variables
const requiredEnvVars = [
  'JWT_SECRET',
  'REDIS_URL',
  'USER_SERVICE_URL',
  'PRODUCT_SERVICE_URL',
  'ORDER_SERVICE_URL',
  'AUTH_SERVICE_URL'
];

const missingEnvVars = requiredEnvVars.filter(envVar => !process.env[envVar]);

if (missingEnvVars.length > 0) {
  console.error('Missing required environment variables:', missingEnvVars);
  process.exit(1);
}

console.log('üöÄ Starting Express Gateway API Gateway');
console.log(`üåç Environment: ${process.env.NODE_ENV || 'development'}`);
console.log(`üìä Log Level: ${process.env.LOG_LEVEL || 'info'}`);

gateway()
  .load(require('./config/system.config'))
  .run();
```

### 3. .env

```env
# Environment
NODE_ENV=development
LOG_LEVEL=info

# Gateway Ports
GATEWAY_HTTP_PORT=8080
GATEWAY_ADMIN_PORT=9876

# JWT Configuration
JWT_SECRET=your-super-secure-jwt-secret-key-change-in-production
JWT_ISSUER=api-gateway
JWT_AUDIENCE=api-consumers
JWT_EXPIRES_IN=1h

# Redis Configuration
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=

# Service URLs
USER_SERVICE_URL=http://localhost:3001
PRODUCT_SERVICE_URL=http://localhost:3002
ORDER_SERVICE_URL=http://localhost:3003
AUTH_SERVICE_URL=http://localhost:3004
INVENTORY_SERVICE_URL=http://localhost:3005

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
AUTH_RATE_LIMIT_MAX=5
AUTH_RATE_LIMIT_WINDOW=900000

# CORS
CORS_ORIGIN=*
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-API-Key
```


### 4. .gitignore

```gitignore
# Dependencies
node_modules/
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# Environment variables
.env
.env.local
.env.production

# Logs
logs
*.log

# Runtime data
pids
*.pid
*.seed
*.pid.lock

# Coverage directory used by tools like istanbul
coverage/

# OS generated files
.DS_Store
.DS_Store?
._*
.Spotlight-V100
.Trashes
ehthumbs.db
Thumbs.db

# IDE
.vscode/
.idea/
*.swp
*.swo

# Docker
docker-compose.override.yml
```


### 5. config/system.config.yml

```yml
# Core
db:
  redis:
    host: localhost
    port: 6379
    password: ${REDIS_PASSWORD}

# Plugins
plugins:
  express-gateway-plugin-rewrite:
    package: express-gateway-plugin-rewrite
  express-gateway-plugin-logger:
    package: express-gateway-plugin-logger
  express-gateway-key-auth:
    package: express-gateway-key-auth

# Gateway Config
gatewayConfig:
  # HTTP Server
  http:
    port: ${GATEWAY_HTTP_PORT}
    
  # Admin Server
  admin:
    port: ${GATEWAY_ADMIN_PORT}
    host: localhost
    
  # API Endpoints
  apiEndpoints:
    # Public endpoints
    health:
      host: localhost
      paths: 
        - '/health'
        - '/status'
        
    auth:
      host: '*'
      paths: 
        - '/auth/*'
        - '/login'
        - '/register'
        - '/token/refresh'
        
    # Protected endpoints
    users:
      host: '*'
      paths: 
        - '/users/*'
        - '/profile'
        - '/me'
        
    products:
      host: '*'
      paths: 
        - '/products/*'
        - '/categories/*'
        - '/search'
        
    orders:
      host: '*'
      paths: 
        - '/orders/*'
        - '/cart/*'
        - '/checkout'
        
    inventory:
      host: '*'
      paths: 
        - '/inventory/*'
        - '/stock/*'

  # Service Endpoints
  serviceEndpoints:
    auth-service:
      url: ${AUTH_SERVICE_URL}
      
    user-service:
      url: ${USER_SERVICE_URL}
      
    product-service:
      url: ${PRODUCT_SERVICE_URL}
      
    order-service:
      url: ${ORDER_SERVICE_URL}
      
    inventory-service:
      url: ${INVENTORY_SERVICE_URL}

  # Policies
  policies:
    - proxy
    - rate-limit
    - jwt
    - cors
    - key-auth
    - log
    - request-transformer
    - response-transformer
    - rewrite
    - circuit-breaker
    - throttling
    
  # Pipelines
  pipelines:
    # Health Check Pipeline (Public)
    healthPipeline:
      apiEndpoints:
        - health
      policies:
        - log:
            - action:
                message: "Health check requested"
        - proxy:
            - action:
                serviceEndpoint: auth-service
                changeOrigin: true
                
    # Authentication Pipeline (Public)
    authPipeline:
      apiEndpoints:
        - auth
      policies:
        - log:
            - action:
                message: "Authentication request"
        - rate-limit:
            - action:
                max: ${AUTH_RATE_LIMIT_MAX}
                windowMs: ${AUTH_RATE_LIMIT_WINDOW}
                key: req.ip
        - cors:
            - action:
                origin: ${CORS_ORIGIN}
                methods: ${CORS_METHODS}
                allowedHeaders: ${CORS_ALLOWED_HEADERS}
        - proxy:
            - action:
                serviceEndpoint: auth-service
                changeOrigin: true
                
    # Users Pipeline (Protected)
    usersPipeline:
      apiEndpoints:
        - users
      policies:
        - log:
            - action:
                message: "User service request"
        - cors:
            - action:
                origin: ${CORS_ORIGIN}
                methods: ${CORS_METHODS}
                allowedHeaders: ${CORS_ALLOWED_HEADERS}
        - jwt:
            - action:
                secretOrPublicKey: ${JWT_SECRET}
                issuer: ${JWT_ISSUER}
                audience: ${JWT_AUDIENCE}
        - rate-limit:
            - action:
                max: ${RATE_LIMIT_MAX_REQUESTS}
                windowMs: ${RATE_LIMIT_WINDOW_MS}
                key: req.user.id
        - proxy:
            - action:
                serviceEndpoint: user-service
                changeOrigin: true
                
    # Products Pipeline (Mixed - some public, some protected)
    productsPipeline:
      apiEndpoints:
        - products
      policies:
        - log:
            - action:
                message: "Product service request"
        - cors:
            - action:
                origin: ${CORS_ORIGIN}
                methods: ${CORS_METHODS}
                allowedHeaders: ${CORS_ALLOWED_HEADERS}
        - conditional:
            - condition:
                name: path-match
                pattern: '^/products/(search|categories)'
              policies:
                - proxy:
                    - action:
                        serviceEndpoint: product-service
                        changeOrigin: true
            - condition:
                name: default
              policies:
                - jwt:
                    - action:
                        secretOrPublicKey: ${JWT_SECRET}
                        issuer: ${JWT_ISSUER}
                        audience: ${JWT_AUDIENCE}
                - rate-limit:
                    - action:
                        max: ${RATE_LIMIT_MAX_REQUESTS}
                        windowMs: ${RATE_LIMIT_WINDOW_MS}
                        key: req.user.id
                - proxy:
                    - action:
                        serviceEndpoint: product-service
                        changeOrigin: true
                        
    # Orders Pipeline (Protected)
    ordersPipeline:
      apiEndpoints:
        - orders
      policies:
        - log:
            - action:
                message: "Order service request"
        - cors:
            - action:
                origin: ${CORS_ORIGIN}
                methods: ${CORS_METHODS}
                allowedHeaders: ${CORS_ALLOWED_HEADERS}
        - jwt:
            - action:
                secretOrPublicKey: ${JWT_SECRET}
                issuer: ${JWT_ISSUER}
                audience: ${JWT_AUDIENCE}
        - rate-limit:
            - action:
                max: ${RATE_LIMIT_MAX_REQUESTS}
                windowMs: ${RATE_LIMIT_WINDOW_MS}
                key: req.user.id
        - request-transformer:
            - action:
                body:
                  add:
                    userId: req.user.id
        - proxy:
            - action:
                serviceEndpoint: order-service
                changeOrigin: true
                
    # Inventory Pipeline (Protected - Admin only)
    inventoryPipeline:
      apiEndpoints:
        - inventory
      policies:
        - log:
            - action:
                message: "Inventory service request"
        - cors:
            - action:
                origin: ${CORS_ORIGIN}
                methods: ${CORS_METHODS}
                allowedHeaders: ${CORS_ALLOWED_HEADERS}
        - jwt:
            - action:
                secretOrPublicKey: ${JWT_SECRET}
                issuer: ${JWT_ISSUER}
                audience: ${JWT_AUDIENCE}
        - condition:
            - name: expression
              expression: "req.user.role === 'admin'"
        - rate-limit:
            - action:
                max: ${RATE_LIMIT_MAX_REQUESTS}
                windowMs: ${RATE_LIMIT_WINDOW_MS}
                key: req.user.id
        - proxy:
            - action:
                serviceEndpoint: inventory-service
                changeOrigin: true
```

If you want to use Redis emulation (no Redis server required):

```yaml
# Core with Redis emulation
db:
  redis:
    emulate: true
    namespace: EG

crypto:
  cipherKey: sensitiveKey
  algorithm: aes256
  saltRounds: 10

session:
  secret: keyboard_cat_change_in_production
  resave: false
  saveUninitialized: false

accessTokens:
  timeToExpiry: 7200000

refreshTokens:
  timeToExpiry: 7200000

authorizationCodes:
  timeToExpiry: 300000
```

Production Ready Version:

```yaml
# Production Configuration
db:
  redis:
    host: ${REDIS_HOST:-localhost}
    port: ${REDIS_PORT:-6379}
    password: ${REDIS_PASSWORD}
    db: ${REDIS_DB:-0}

crypto:
  cipherKey: ${CRYPTO_KEY:-sensitiveKey}
  algorithm: aes256
  saltRounds: 10

session:
  secret: ${SESSION_SECRET:-keyboard_cat_change_in_production}
  resave: false
  saveUninitialized: false

accessTokens:
  timeToExpiry: ${ACCESS_TOKEN_EXPIRY:-7200000}

refreshTokens:
  timeToExpiry: ${REFRESH_TOKEN_EXPIRY:-7200000}

authorizationCodes:
  timeToExpiry: ${AUTH_CODE_EXPIRY:-300000}

# Logging
logger:
  level: ${LOG_LEVEL:-info}

```



### 6. config/gateway.config.yml

```yml
http:
  port: ${GATEWAY_HTTP_PORT}

admin:
  port: ${GATEWAY_ADMIN_PORT}
  host: localhost

apiEndpoints:
  health:
    host: localhost
    paths: 
      - '/health'
      - '/status'
      
  auth:
    host: '*'
    paths: 
      - '/auth/*'
      - '/login'
      - '/register'
      - '/token/refresh'
      
  users:
    host: '*'
    paths: 
      - '/users/*'
      - '/profile'
      - '/me'
      
  products:
    host: '*'
    paths: 
      - '/products/*'
      - '/categories/*'
      - '/search'
      
  orders:
    host: '*'
    paths: 
      - '/orders/*'
      - '/cart/*'
      - '/checkout'
      
  inventory:
    host: '*'
    paths: 
      - '/inventory/*'
      - '/stock/*'

serviceEndpoints:
  auth-service:
    url: ${AUTH_SERVICE_URL}
    
  user-service:
    url: ${USER_SERVICE_URL}
    
  product-service:
    url: ${PRODUCT_SERVICE_URL}
    
  order-service:
    url: ${ORDER_SERVICE_URL}
    
  inventory-service:
    url: ${INVENTORY_SERVICE_URL}

policies:
  - proxy
  - rate-limit
  - jwt
  - cors
  - key-auth
  - log
  - request-transformer
  - response-transformer
  - rewrite
  - circuit-breaker
  - throttling
  - condition
  - expression

pipelines:
  healthPipeline:
    apiEndpoints:
      - health
    policies:
      - log:
          - action:
              message: "Health check requested"
      - proxy:
          - action:
              serviceEndpoint: auth-service
              changeOrigin: true
              
  authPipeline:
    apiEndpoints:
      - auth
    policies:
      - log:
          - action:
              message: "Authentication request"
      - rate-limit:
          - action:
              max: ${AUTH_RATE_LIMIT_MAX}
              windowMs: ${AUTH_RATE_LIMIT_WINDOW}
              key: req.ip
      - cors:
          - action:
              origin: ${CORS_ORIGIN}
              methods: ${CORS_METHODS}
              allowedHeaders: ${CORS_ALLOWED_HEADERS}
      - proxy:
          - action:
              serviceEndpoint: auth-service
              changeOrigin: true
              
  usersPipeline:
    apiEndpoints:
      - users
    policies:
      - log:
          - action:
              message: "User service request"
      - cors:
          - action:
              origin: ${CORS_ORIGIN}
              methods: ${CORS_METHODS}
              allowedHeaders: ${CORS_ALLOWED_HEADERS}
      - jwt:
          - action:
              secretOrPublicKey: ${JWT_SECRET}
              issuer: ${JWT_ISSUER}
              audience: ${JWT_AUDIENCE}
      - rate-limit:
          - action:
              max: ${RATE_LIMIT_MAX_REQUESTS}
              windowMs: ${RATE_LIMIT_WINDOW_MS}
              key: req.user.id
      - proxy:
          - action:
              serviceEndpoint: user-service
              changeOrigin: true
              
  productsPipeline:
    apiEndpoints:
      - products
    policies:
      - log:
          - action:
              message: "Product service request"
      - cors:
          - action:
              origin: ${CORS_ORIGIN}
              methods: ${CORS_METHODS}
              allowedHeaders: ${CORS_ALLOWED_HEADERS}
      - condition:
          - condition:
              name: expression
              expression: "req.path.includes('/search') || req.path.includes('/categories')"
            policies:
              - proxy:
                  - action:
                      serviceEndpoint: product-service
                      changeOrigin: true
          - condition:
              name: default
            policies:
              - jwt:
                  - action:
                      secretOrPublicKey: ${JWT_SECRET}
                      issuer: ${JWT_ISSUER}
                      audience: ${JWT_AUDIENCE}
              - rate-limit:
                  - action:
                      max: ${RATE_LIMIT_MAX_REQUESTS}
                      windowMs: ${RATE_LIMIT_WINDOW_MS}
                      key: req.user.id
              - proxy:
                  - action:
                      serviceEndpoint: product-service
                      changeOrigin: true
                      
  ordersPipeline:
    apiEndpoints:
      - orders
    policies:
      - log:
          - action:
              message: "Order service request"
      - cors:
          - action:
              origin: ${CORS_ORIGIN}
              methods: ${CORS_METHODS}
              allowedHeaders: ${CORS_ALLOWED_HEADERS}
      - jwt:
          - action:
              secretOrPublicKey: ${JWT_SECRET}
              issuer: ${JWT_ISSUER}
              audience: ${JWT_AUDIENCE}
      - rate-limit:
          - action:
              max: ${RATE_LIMIT_MAX_REQUESTS}
              windowMs: ${RATE_LIMIT_WINDOW_MS}
              key: req.user.id
      - request-transformer:
          - action:
              body:
                add:
                  userId: req.user.id
      - proxy:
          - action:
              serviceEndpoint: order-service
              changeOrigin: true
              
  inventoryPipeline:
    apiEndpoints:
      - inventory
    policies:
      - log:
          - action:
              message: "Inventory service request"
      - cors:
          - action:
              origin: ${CORS_ORIGIN}
              methods: ${CORS_METHODS}
              allowedHeaders: ${CORS_ALLOWED_HEADERS}
      - jwt:
          - action:
              secretOrPublicKey: ${JWT_SECRET}
              issuer: ${JWT_ISSUER}
              audience: ${JWT_AUDIENCE}
      - condition:
          - name: expression
            expression: "req.user.role === 'admin'"
      - rate-limit:
          - action:
              max: ${RATE_LIMIT_MAX_REQUESTS}
              windowMs: ${RATE_LIMIT_WINDOW_MS}
              key: req.user.id
      - proxy:
          - action:
              serviceEndpoint: inventory-service
              changeOrigin: true

```

### 7. extensions/custom-policy/index.js

```js
const Policy = require('express-gateway/lib/policies/Policy');

class CustomAuthPolicy extends Policy {
  constructor() {
    super();
  }

  init() {
    // Initialization logic
  }

  async action(req, res, next) {
    const apiKey = req.headers['x-api-key'];
    
    if (!apiKey) {
      return res.status(401).json({
        error: 'API Key required',
        message: 'Please provide a valid API key in X-API-Key header'
      });
    }

    // Validate API key (in real implementation, check against database)
    if (apiKey !== 'valid-api-key') {
      return res.status(403).json({
        error: 'Invalid API Key',
        message: 'The provided API key is invalid'
      });
    }

    // Add user context to request
    req.user = {
      id: 'api-user',
      role: 'api-client',
      permissions: ['read', 'write']
    };

    next();
  }
}

module.exports = {
  version: '1.0.0',
  init: function (pluginContext) {
    pluginContext.registerPolicy(new CustomAuthPolicy());
  }
};
```



### 8. extensions/custom-policy/package.json

```json
{
  "name": "eg-custom-auth-policy",
  "version": "1.0.0",
  "description": "Custom API Key authentication policy for Express Gateway",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [
    "express-gateway",
    "plugin",
    "policy",
    "authentication"
  ],
  "author": "Your Name",
  "license": "MIT"
}
```


### 9. scripts/init-gateway.js

```js
require('dotenv').config();
const axios = require('axios');

const ADMIN_BASE_URL = `http://localhost:${process.env.GATEWAY_ADMIN_PORT}`;

async function initializeGateway() {
  console.log('üöÄ Initializing Express Gateway...');

  try {
    // Wait for gateway to be ready
    await new Promise(resolve => setTimeout(resolve, 5000));

    // Check if gateway is running
    const healthResponse = await axios.get(`${ADMIN_BASE_URL}/status`);
    console.log('‚úÖ Gateway admin interface is running');

    // Create initial credentials (example)
    console.log('üìù Creating initial configuration...');
    
    // You can add more initialization logic here
    // For example: creating users, applications, credentials via admin API
    
    console.log('üéâ Gateway initialization completed!');
    
  } catch (error) {
    console.error('‚ùå Failed to initialize gateway:', error.message);
    process.exit(1);
  }
}

initializeGateway();
```



### 10. docker/Dockerfile

```dockerfile
FROM node:18-alpine

WORKDIR /app

# Copy package files
COPY package*.json ./

# Install dependencies
RUN npm ci --only=production

# Copy source code
COPY . .

# Create non-root user
RUN addgroup -g 1001 -S nodejs
RUN adduser -S express-gateway -u 1001

# Change ownership
RUN chown -R express-gateway:nodejs /app

USER express-gateway

# Expose ports
EXPOSE 8080 9876

# Health check
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD node -e "require('http').get('http://localhost:8080/health', (res) => { process.exit(res.statusCode === 200 ? 0 : 1) })"

# Start the gateway
CMD ["node", "server.js"]
```


### 11. docker/docker-compose.yml

```yaml
version: '3.8'

services:
  api-gateway:
    build:
      context: ..
      dockerfile: docker/Dockerfile
    ports:
      - "8080:8080"
      - "9876:9876"
    environment:
      - NODE_ENV=production
      - REDIS_URL=redis://redis:6379
      - JWT_SECRET=${JWT_SECRET}
    env_file:
      - ../.env
    depends_on:
      - redis
    networks:
      - gateway-network
    restart: unless-stopped

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    command: redis-server --appendonly yes
    volumes:
      - redis-data:/data
    networks:
      - gateway-network
    restart: unless-stopped

  # Example backend services (for testing)
  auth-service:
    image: node:18-alpine
    working_dir: /app
    command: sh -c "npm install -g json-server && json-server --watch auth-db.json --port 3004 --host 0.0.0.0"
    volumes:
      - ../mock-services/auth-db.json:/app/auth-db.json
    networks:
      - gateway-network
    restart: unless-stopped

  user-service:
    image: node:18-alpine
    working_dir: /app
    command: sh -c "npm install -g json-server && json-server --watch user-db.json --port 3001 --host 0.0.0.0"
    volumes:
      - ../mock-services/user-db.json:/app/user-db.json
    networks:
      - gateway-network
    restart: unless-stopped

volumes:
  redis-data:

networks:
  gateway-network:
    driver: bridge
```



### 12. mock-services/auth-db.json

```json
{
  "users": [
    {
      "id": 1,
      "email": "admin@example.com",
      "password": "$2b$10$examplehashedpassword",
      "role": "admin",
      "createdAt": "2024-01-15T10:00:00Z"
    },
    {
      "id": 2,
      "email": "user@example.com",
      "password": "$2b$10$examplehashedpassword",
      "role": "user",
      "createdAt": "2024-01-15T10:00:00Z"
    }
  ],
  "tokens": [],
  "health": {
    "status": "healthy",
    "timestamp": "2024-01-15T10:00:00Z",
    "service": "auth-service"
  }
}
```


### 13. README.md

```markdown
# Express Gateway API Gateway

A complete, production-ready API Gateway built with Express Gateway.

## Features

- üîê JWT Authentication & Authorization
- ‚ö° Rate Limiting
- üåê CORS Support
- üìä Request Logging
- üîÑ Request/Response Transformation
- üõ°Ô∏è Security Headers
- üè• Health Checks
- üê≥ Docker Support
- üìà Circuit Breaker
- üîë API Key Authentication

## Quick Start

### Prerequisites

- Node.js 18+
- Redis
- Docker (optional)

### Installation

1. **Clone and install:**

```bash
git clone <repository>
cd express-gateway-project
npm install
```

2. **Configure environment:**

```bash
cp .env.example .env
# Edit .env with your configuration
```


3. **Start services:**

```bash
# Using Docker (recommended)
npm run docker:up

# Or manually
redis-server &
npm start
```


### Usage

**Access the gateway:**

```bash
# API Gateway
http://localhost:8080

# Admin interface
http://localhost:9876
```

**Example requests:**

```bash
# Health check
curl http://localhost:8080/health

# Public product search
curl http://localhost:8080/products/search?q=laptop

# Protected user profile (requires JWT)
curl -H "Authorization: Bearer <jwt-token>" http://localhost:8080/users/me
```


### Configuration

***Environment Variables***

See `.env.example` for all available configuration options.


***Adding New Services***

1. Update config/gateway.config.yml:

    - Add new apiEndpoints
    - Add new serviceEndpoints
    - Create new pipeline


***Custom Policies***
See `extensions/custom-policy` for examples of custom policy development.


### Development

```bash
# Development mode
npm run dev

# Run tests
npm test

# Create test credentials
npm run create-user
```

###Deployment

**Docker**

```bash
npm run docker:build
npm run docker:up
```



### Kubernetes
Kubernetes manifests are available in the k8s/ directory.

### Monitoring
- Health: GET /health
- Metrics: GET /metrics (if configured)
- Admin Dashboard: http://localhost:9876

### API Documentation
See `docs/api-reference.md` for detailed API documentation.


## Installation & Running

1. **Create the project:**
 
```bash
mkdir express-gateway-project
cd express-gateway-project
# Create all files as shown above
```

2. **Install and run:**

```bash
npm install

# Start Redis first
redis-server &

# Start the gateway
npm start
```

3. **Or use Docker:**

```bash
npm run docker:up
```



### Testing the Gateway

```bash
# Health check
curl http://localhost:8080/health

# Public endpoints
curl http://localhost:8080/auth/login
curl http://localhost:8080/products/search

# Admin interface
open http://localhost:9876
```

This complete Express Gateway project provides:

    ‚úÖ Production-ready structure 
    ‚úÖ Docker support 
    ‚úÖ Comprehensive configuration 
    ‚úÖ Custom policies 
    ‚úÖ Security features 
    ‚úÖ Monitoring and health checks 
    ‚úÖ Scalable architecture

